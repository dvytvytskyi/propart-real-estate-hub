# üõ†Ô∏è –î–ï–¢–ê–õ–¨–ù–ò–ô –ü–õ–ê–ù –í–ò–ü–†–ê–í–õ–ï–ù–¨

## üìÖ –¢–ò–ñ–î–ï–ù–¨ 1: –ö–†–ò–¢–ò–ß–ù–Ü –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

### –î–µ–Ω—å 1: –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

#### –§–∞–π–ª 1: `app_config.py` (–ù–û–í–ò–ô)
```python
"""
–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–æ–¥–∞—Ç–∫—É –∑ proper error handling
"""
import os
from dotenv import load_dotenv

load_dotenv()

class Config:
    # Security
    SECRET_KEY = os.getenv('SECRET_KEY')
    if not SECRET_KEY:
        raise ValueError("SECRET_KEY must be set in .env file")
    
    # Database
    SQLALCHEMY_DATABASE_URI = os.getenv(
        'DATABASE_URL',
        'postgresql://localhost/real_estate_agents'
    )
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    SQLALCHEMY_ENGINE_OPTIONS = {
        'pool_size': 10,
        'pool_recycle': 3600,
        'pool_pre_ping': True,
        'max_overflow': 20,
        'connect_args': {
            'connect_timeout': 10,
            'options': '-c statement_timeout=30000'
        }
    }
    
    # HubSpot
    HUBSPOT_API_KEY = os.getenv('HUBSPOT_API_KEY')
    HUBSPOT_RATE_LIMIT_CALLS = 90
    HUBSPOT_RATE_LIMIT_PERIOD = 10
    
    # Logging
    LOG_LEVEL = os.getenv('LOG_LEVEL', 'INFO')
    LOG_FILE = 'logs/propart.log'
    LOG_MAX_BYTES = 10 * 1024 * 1024  # 10MB
    LOG_BACKUP_COUNT = 10
```

#### –§–∞–π–ª 2: `logging_config.py` (–ù–û–í–ò–ô)
```python
"""
–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
"""
import logging
from logging.handlers import RotatingFileHandler
import os

def setup_logging(app):
    """–ù–∞–ª–∞—à—Ç–æ–≤—É—î –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –¥–æ–¥–∞—Ç–∫—É"""
    
    # –°—Ç–≤–æ—Ä—é—î–º–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –¥–ª—è –ª–æ–≥—ñ–≤
    if not os.path.exists('logs'):
        os.mkdir('logs')
    
    # –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ —Ñ–∞–π–ª–æ–≤–∏–π handler
    file_handler = RotatingFileHandler(
        app.config['LOG_FILE'],
        maxBytes=app.config['LOG_MAX_BYTES'],
        backupCount=app.config['LOG_BACKUP_COUNT']
    )
    
    # –§–æ—Ä–º–∞—Ç –ª–æ–≥—ñ–≤
    formatter = logging.Formatter(
        '[%(asctime)s] %(levelname)s in %(module)s: %(message)s'
    )
    file_handler.setFormatter(formatter)
    
    # –†—ñ–≤–µ–Ω—å –ª–æ–≥—É–≤–∞–Ω–Ω—è
    log_level = getattr(logging, app.config['LOG_LEVEL'].upper())
    file_handler.setLevel(log_level)
    
    # –î–æ–¥–∞—î–º–æ handler –¥–æ app logger
    app.logger.addHandler(file_handler)
    app.logger.setLevel(log_level)
    
    # –õ–æ–≥—É—î–º–æ —Å—Ç–∞—Ä—Ç –¥–æ–¥–∞—Ç–∫—É
    app.logger.info('ProPart Hub starting up')
    
    # –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ SQLAlchemy logging
    if app.config.get('DEBUG'):
        logging.getLogger('sqlalchemy.engine').setLevel(logging.INFO)
    
    return app.logger
```

#### –§–∞–π–ª 3: `error_handlers.py` (–ù–û–í–ò–ô)
```python
"""
–û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–º–∏–ª–æ–∫
"""
from flask import jsonify, render_template
from sqlalchemy.exc import SQLAlchemyError, OperationalError
from requests.exceptions import RequestException

def register_error_handlers(app, db):
    """–†–µ—î—Å—Ç—Ä—É—î –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–º–∏–ª–æ–∫"""
    
    @app.errorhandler(404)
    def not_found_error(error):
        app.logger.warning(f'Page not found: {error}')
        return render_template('errors/404.html'), 404
    
    @app.errorhandler(500)
    def internal_error(error):
        app.logger.error(f'Internal server error: {error}')
        db.session.rollback()
        return render_template('errors/500.html'), 500
    
    @app.errorhandler(SQLAlchemyError)
    def handle_db_error(error):
        app.logger.error(f'Database error: {error}')
        db.session.rollback()
        return jsonify({
            'success': False,
            'error': 'Database error occurred'
        }), 500
    
    @app.errorhandler(OperationalError)
    def handle_db_connection_error(error):
        app.logger.error(f'Database connection error: {error}')
        db.session.rollback()
        return jsonify({
            'success': False,
            'error': 'Database connection lost'
        }), 503
    
    @app.errorhandler(RequestException)
    def handle_api_error(error):
        app.logger.error(f'API request error: {error}')
        return jsonify({
            'success': False,
            'error': 'External API error'
        }), 502
    
    @app.errorhandler(ValueError)
    def handle_validation_error(error):
        app.logger.warning(f'Validation error: {error}')
        return jsonify({
            'success': False,
            'error': str(error)
        }), 400
```

#### –ó–º—ñ–Ω–∏ –≤ `app.py`:
```python
# –ù–∞ –ø–æ—á–∞—Ç–∫—É —Ñ–∞–π–ª—É, –ø—ñ—Å–ª—è imports:
from app_config import Config
from logging_config import setup_logging
from error_handlers import register_error_handlers

# –ó–∞–º—ñ–Ω–∏—Ç–∏ —ñ—Å–Ω—É—é—á—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:
app = Flask(__name__)
app.config.from_object(Config)

# –î–æ–¥–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è:
logger = setup_logging(app)

# –î–æ–¥–∞—Ç–∏ error handlers:
register_error_handlers(app, db)

# –ó–∞–º—ñ–Ω–∏—Ç–∏ –≤—Å—ñ print() –Ω–∞ logger:
# print("HubSpot API —É—Å–ø—ñ—à–Ω–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ!") ‚Üí
logger.info("HubSpot API successfully connected")

# print(f"–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è HubSpot API: {e}") ‚Üí
logger.error(f"HubSpot API connection error: {e}")
```

**–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** 4-6 –≥–æ–¥–∏–Ω  
**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** 1-2 –≥–æ–¥–∏–Ω–∏

---

### –î–µ–Ω—å 2: HubSpot Rate Limiting

#### –§–∞–π–ª 4: `hubspot_rate_limiter.py` (–ù–û–í–ò–ô)
```python
"""
Rate limiter –¥–ª—è HubSpot API
"""
import time
from functools import wraps
from requests.exceptions import HTTPError
from flask import current_app

class HubSpotRateLimiter:
    """Rate limiter –∑ exponential backoff –¥–ª—è HubSpot API"""
    
    def __init__(self, max_calls=90, period=10):
        self.max_calls = max_calls
        self.period = period
        self.calls = []
    
    def __call__(self, func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            now = time.time()
            
            # –í–∏–¥–∞–ª—è—î–º–æ —Å—Ç–∞—Ä—ñ –≤–∏–∫–ª–∏–∫–∏
            self.calls = [c for c in self.calls if c > now - self.period]
            
            # –ß–µ–∫–∞—î–º–æ, —è–∫—â–æ –¥–æ—Å—è–≥–ª–∏ –ª—ñ–º—ñ—Ç—É
            if len(self.calls) >= self.max_calls:
                sleep_time = self.period - (now - self.calls[0])
                current_app.logger.warning(
                    f'Rate limit reached, sleeping {sleep_time:.2f}s'
                )
                time.sleep(sleep_time)
            
            self.calls.append(time.time())
            
            # Retry logic –∑ exponential backoff
            max_retries = 3
            for attempt in range(max_retries):
                try:
                    return func(*args, **kwargs)
                
                except HTTPError as e:
                    if e.response.status_code == 429:
                        # Rate limit exceeded
                        retry_after = int(e.response.headers.get('Retry-After', 60))
                        current_app.logger.warning(
                            f'429 error, retry after {retry_after}s (attempt {attempt + 1}/{max_retries})'
                        )
                        if attempt < max_retries - 1:
                            time.sleep(retry_after)
                        else:
                            raise
                    elif e.response.status_code in [500, 502, 503, 504]:
                        # Server errors - retry with exponential backoff
                        if attempt < max_retries - 1:
                            sleep_time = 2 ** attempt
                            current_app.logger.warning(
                                f'{e.response.status_code} error, retrying in {sleep_time}s'
                            )
                            time.sleep(sleep_time)
                        else:
                            raise
                    else:
                        # Other HTTP errors - don't retry
                        raise
                
                except Exception as e:
                    # Other exceptions
                    if attempt < max_retries - 1:
                        sleep_time = 2 ** attempt
                        current_app.logger.warning(
                            f'Error: {e}, retrying in {sleep_time}s'
                        )
                        time.sleep(sleep_time)
                    else:
                        raise
        
        return wrapper

# –ì–ª–æ–±–∞–ª—å–Ω–∏–π rate limiter
rate_limiter = HubSpotRateLimiter(
    max_calls=90,  # HubSpot limit: 100/10s, –∑–∞–ª–∏—à–∞—î–º–æ –∑–∞–ø–∞—Å
    period=10
)
```

#### –ó–º—ñ–Ω–∏ –≤ `app.py`:
```python
from hubspot_rate_limiter import rate_limiter

# –î–æ–¥–∞—Ç–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–æ –≤—Å—ñ—Ö HubSpot —Ñ—É–Ω–∫—Ü—ñ–π:

@rate_limiter
def fetch_notes_from_hubspot(lead):
    # ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥

@rate_limiter
def fetch_activities_from_hubspot(lead):
    # ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥

@rate_limiter
def sync_lead_from_hubspot(lead):
    # ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥

@rate_limiter
def create_note_in_hubspot(lead, note_text, note_type="note"):
    # ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥
```

#### –ó–º—ñ–Ω–∏ –≤ `templates/dashboard.html`:
```javascript
// –ó–º—ñ–Ω–∏—Ç–∏ —ñ–Ω—Ç–µ—Ä–≤–∞–ª –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑ 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ 5 —Ö–≤–∏–ª–∏–Ω
setInterval(function() {
    console.log('–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ HubSpot...');
    // ...
}, 300000); // 5 —Ö–≤–∏–ª–∏–Ω (–∑–∞–º—ñ—Å—Ç—å 30000)
```

**–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** 2-3 –≥–æ–¥–∏–Ω–∏  
**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** 1-2 –≥–æ–¥–∏–Ω–∏

---

### –î–µ–Ω—å 3: –ë–µ–∑–ø–µ–∫–∞ (CSRF, Bcrypt, Rate Limiting)

#### –§–∞–π–ª 5: `security.py` (–ù–û–í–ò–ô)
```python
"""
–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏
"""
from flask_wtf.csrf import CSRFProtect
from flask_limiter import Limiter
from flask_limiter.util import get_remote_address
from flask_bcrypt import Bcrypt

def init_security(app):
    """–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î security extensions"""
    
    # CSRF Protection
    csrf = CSRFProtect(app)
    
    # Rate Limiting
    limiter = Limiter(
        app=app,
        key_func=get_remote_address,
        default_limits=["200 per day", "50 per hour"],
        storage_uri=app.config.get('RATELIMIT_STORAGE_URL', 'memory://')
    )
    
    # Password Hashing
    bcrypt = Bcrypt(app)
    
    return csrf, limiter, bcrypt
```

#### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ User –≤ `app.py`:
```python
# –ó–∞–º—ñ–Ω–∏—Ç–∏ –º–µ—Ç–æ–¥–∏ set_password —Ç–∞ check_password:

def set_password(self, password):
    """–•–µ—à—É—î –ø–∞—Ä–æ–ª—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ bcrypt"""
    from security import bcrypt
    self.password_hash = bcrypt.generate_password_hash(password).decode('utf-8')

def check_password(self, password):
    """–ü–µ—Ä–µ–≤—ñ—Ä—è—î –ø–∞—Ä–æ–ª—å"""
    from security import bcrypt
    return bcrypt.check_password_hash(self.password_hash, password)
```

#### –î–æ–¥–∞—Ç–∏ rate limiting –¥–æ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö endpoints:
```python
from security import limiter

@app.route('/login', methods=['POST'])
@limiter.limit("5 per minute")
def login():
    # ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥

@app.route('/register', methods=['POST'])
@limiter.limit("3 per hour")
def register():
    # ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥

@app.route('/add_lead', methods=['POST'])
@login_required
@limiter.limit("20 per minute")
def add_lead():
    # ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥
```

#### –û–Ω–æ–≤–∏—Ç–∏ `requirements.txt`:
```txt
Flask-WTF==1.2.1
Flask-Limiter==3.5.0
Flask-Bcrypt==1.0.1
redis==5.0.1
```

**–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** 3-4 –≥–æ–¥–∏–Ω–∏  
**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** 2-3 –≥–æ–¥–∏–Ω–∏

---

## üìÖ –¢–ò–ñ–î–ï–ù–¨ 2: –í–ê–ñ–õ–ò–í–Ü –ü–û–ö–†–ê–©–ï–ù–ù–Ø

### –î–µ–Ω—å 1-2: Alembic Migrations

#### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:
```bash
pip install alembic
alembic init migrations
```

#### –§–∞–π–ª 6: `alembic.ini` (–æ–Ω–æ–≤–∏—Ç–∏)
```ini
[alembic]
script_location = migrations
sqlalchemy.url = postgresql://localhost/real_estate_agents

[loggers]
keys = root,sqlalchemy,alembic

[logger_alembic]
level = INFO
handlers =
qualname = alembic
```

#### –§–∞–π–ª 7: `migrations/env.py` (–æ–Ω–æ–≤–∏—Ç–∏)
```python
from app import app, db

config.set_main_option(
    'sqlalchemy.url',
    app.config['SQLALCHEMY_DATABASE_URI']
)

target_metadata = db.metadata
```

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π:
```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–µ—Ä—à—É –º—ñ–≥—Ä–∞—Ü—ñ—é
alembic revision --autogenerate -m "Initial migration"

# –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é
alembic upgrade head

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é –¥–ª—è —ñ–Ω–¥–µ–∫—Å—ñ–≤
alembic revision -m "Add indexes"
```

**–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** 4-6 –≥–æ–¥–∏–Ω  
**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** 2 –≥–æ–¥–∏–Ω–∏

---

### –î–µ–Ω—å 3: –Ü–Ω–¥–µ–∫—Å–∏ –ë–î

#### –§–∞–π–ª 8: `migrations/versions/XXXX_add_indexes.py`
```python
"""Add database indexes

Revision ID: XXXX
"""
from alembic import op

def upgrade():
    # Lead indexes
    op.create_index('idx_lead_agent_id', 'lead', ['agent_id'])
    op.create_index('idx_lead_status', 'lead', ['status'])
    op.create_index('idx_lead_created_at', 'lead', ['created_at'])
    op.create_index('idx_lead_updated_at', 'lead', ['updated_at'])
    op.create_index('idx_lead_hubspot_contact_id', 'lead', ['hubspot_contact_id'])
    op.create_index('idx_lead_hubspot_deal_id', 'lead', ['hubspot_deal_id'])
    
    # User indexes
    op.create_index('idx_user_role', 'user', ['role'])
    op.create_index('idx_user_is_active', 'user', ['is_active'])
    op.create_index('idx_user_level', 'user', ['level'])
    
    # Note status indexes
    op.create_index('idx_note_status_lead_id', 'note_status', ['lead_id'])
    op.create_index('idx_note_status_created_at', 'note_status', ['created_at'])
    
    # Activity indexes
    op.create_index('idx_activity_lead_id', 'activity', ['lead_id'])
    op.create_index('idx_activity_type', 'activity', ['activity_type'])
    op.create_index('idx_activity_created_at', 'activity', ['created_at'])

def downgrade():
    # Drop indexes
    op.drop_index('idx_lead_agent_id')
    op.drop_index('idx_lead_status')
    # ... —ñ–Ω—à—ñ —ñ–Ω–¥–µ–∫—Å–∏
```

**–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:**
```bash
alembic upgrade head
```

**–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** 2 –≥–æ–¥–∏–Ω–∏  
**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** 1 –≥–æ–¥–∏–Ω–∞

---

### –î–µ–Ω—å 4-5: –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è —Ç–∞ –í–∞–ª—ñ–¥–∞—Ü—ñ—è

#### –§–∞–π–ª 9: `validators.py` (–ù–û–í–ò–ô)
```python
"""
–í–∞–ª—ñ–¥–∞—Ç–æ—Ä–∏ –¥–ª—è –¥–∞–Ω–∏—Ö
"""
from marshmallow import Schema, fields, validate, ValidationError, validates
import phonenumbers

class LeadSchema(Schema):
    deal_name = fields.Str(
        required=True,
        validate=validate.Length(min=2, max=100)
    )
    email = fields.Email(required=True)
    phone = fields.Str(required=True)
    budget = fields.Str(
        validate=validate.OneOf([
            '–¥–æ 200–∫', '200–∫‚Äì500–∫', '500–∫‚Äì1–º–ª–Ω', '1–º–ª–Ω+'
        ])
    )
    status = fields.Str(
        validate=validate.OneOf([
            'new', 'contacted', 'qualified', 'closed'
        ])
    )
    notes = fields.Str(validate=validate.Length(max=500))
    
    @validates('phone')
    def validate_phone(self, value):
        try:
            parsed = phonenumbers.parse(value, None)
            if not phonenumbers.is_valid_number(parsed):
                raise ValidationError('Invalid phone number')
        except phonenumbers.NumberParseException:
            raise ValidationError('Invalid phone number format')

lead_schema = LeadSchema()
```

#### –û–Ω–æ–≤–∏—Ç–∏ routes –≤ `app.py`:
```python
from validators import lead_schema, ValidationError

@app.route('/add_lead', methods=['POST'])
@login_required
def add_lead():
    # –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
    try:
        data = lead_schema.load(request.form)
    except ValidationError as err:
        flash('Validation error: ' + str(err.messages))
        return redirect(url_for('add_lead'))
    
    # ... —Ä–µ—à—Ç–∞ –∫–æ–¥—É

@app.route('/dashboard')
@login_required
def dashboard():
    # –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è
    page = request.args.get('page', 1, type=int)
    per_page = 20
    
    if current_user.role == 'admin':
        pagination = Lead.query.options(
            joinedload(Lead.agent)
        ).order_by(Lead.created_at.desc()).paginate(
            page=page, per_page=per_page, error_out=False
        )
    else:
        pagination = Lead.query.filter_by(
            agent_id=current_user.id
        ).order_by(Lead.created_at.desc()).paginate(
            page=page, per_page=per_page, error_out=False
        )
    
    leads = pagination.items
    # ... —Ä–µ—à—Ç–∞ –∫–æ–¥—É
```

**–î–æ–¥–∞—Ç–∏ –¥–æ `requirements.txt`:**
```txt
marshmallow==3.20.1
```

**–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** 4-6 –≥–æ–¥–∏–Ω  
**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** 2 –≥–æ–¥–∏–Ω–∏

---

## üìã –ß–ï–ö–õ–ò–°–¢ –í–ò–ö–û–ù–ê–ù–ù–Ø

### –¢–∏–∂–¥–µ–Ω—å 1:
- [ ] –î–µ–Ω—å 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ `app_config.py`
- [ ] –î–µ–Ω—å 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ `logging_config.py`
- [ ] –î–µ–Ω—å 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ `error_handlers.py`
- [ ] –î–µ–Ω—å 1: –û–Ω–æ–≤–∏—Ç–∏ `app.py` (logging)
- [ ] –î–µ–Ω—å 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `logs/`
- [ ] –î–µ–Ω—å 1: –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- [ ] –î–µ–Ω—å 2: –°—Ç–≤–æ—Ä–∏—Ç–∏ `hubspot_rate_limiter.py`
- [ ] –î–µ–Ω—å 2: –û–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ HubSpot —Ñ—É–Ω–∫—Ü—ñ—ó
- [ ] –î–µ–Ω—å 2: –û–Ω–æ–≤–∏—Ç–∏ `dashboard.html` (—ñ–Ω—Ç–µ—Ä–≤–∞–ª)
- [ ] –î–µ–Ω—å 2: –¢–µ—Å—Ç—É–≤–∞—Ç–∏ rate limiting
- [ ] –î–µ–Ω—å 3: –°—Ç–≤–æ—Ä–∏—Ç–∏ `security.py`
- [ ] –î–µ–Ω—å 3: –û–Ω–æ–≤–∏—Ç–∏ User model (bcrypt)
- [ ] –î–µ–Ω—å 3: –î–æ–¥–∞—Ç–∏ rate limiting –¥–æ routes
- [ ] –î–µ–Ω—å 3: –û–Ω–æ–≤–∏—Ç–∏ `requirements.txt`
- [ ] –î–µ–Ω—å 3: –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –±–µ–∑–ø–µ–∫—É

### –¢–∏–∂–¥–µ–Ω—å 2:
- [ ] –î–µ–Ω—å 1: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Alembic
- [ ] –î–µ–Ω—å 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ initial migration
- [ ] –î–µ–Ω—å 2: –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é
- [ ] –î–µ–Ω—å 3: –°—Ç–≤–æ—Ä–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é –¥–ª—è —ñ–Ω–¥–µ–∫—Å—ñ–≤
- [ ] –î–µ–Ω—å 3: –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —ñ–Ω–¥–µ–∫—Å–∏
- [ ] –î–µ–Ω—å 4: –°—Ç–≤–æ—Ä–∏—Ç–∏ `validators.py`
- [ ] –î–µ–Ω—å 4: –î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –¥–æ routes
- [ ] –î–µ–Ω—å 5: –î–æ–¥–∞—Ç–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é
- [ ] –î–µ–Ω—å 5: –û–Ω–æ–≤–∏—Ç–∏ templates –¥–ª—è –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó
- [ ] –î–µ–Ω—å 5: –§—ñ–Ω–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

---

## üß™ –¢–ï–°–¢–£–í–ê–ù–ù–Ø

### –ü—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–Ω—è:
```bash
# 1. Backup –ë–î
pg_dump real_estate_agents > backup_$(date +%Y%m%d).sql

# 2. –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –æ—Å–Ω–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª
python -m pytest tests/

# 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
tail -f logs/propart.log

# 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ HubSpot —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é
python test_hubspot.py
```

---

## üìû –ü–Ü–î–¢–†–ò–ú–ö–ê

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–æ–±–ª–µ–º–∏ –ø—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –ø–ª–∞–Ω—É:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `logs/propart.log`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞–Ω –ë–î: `psql -d real_estate_agents`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ .env —Ñ–∞–π–ª
4. –ó–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ —Ç–µ—Ö–Ω—ñ—á–Ω–æ–≥–æ –∫–µ—Ä—ñ–≤–Ω–∏–∫–∞

**–£—Å–ø—ñ—à–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è! üöÄ**

