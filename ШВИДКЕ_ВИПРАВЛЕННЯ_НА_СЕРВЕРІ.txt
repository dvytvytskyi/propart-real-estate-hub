==========================================
–®–í–ò–î–ö–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –ü–û–í–Ü–õ–¨–ù–û–ì–û –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø
==========================================

–ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ —Ü—ñ –∫–æ–º–∞–Ω–¥–∏:

cd /home/pro-part-agent/htdocs/agent.pro-part.online/propart-real-estate-hub

# –í–ê–†–Ü–ê–ù–¢ 1: –®–≤–∏–¥–∫–µ –≤–∏–º–∫–Ω–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
==========================================

# –ó–Ω–∞–π–¥—ñ—Ç—å —Ä—è–¥–æ–∫ ~5739 –∑ start_background_sync() —Ç–∞ –∑–∞–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ –π–æ–≥–æ:
sed -i 's/^\([[:space:]]*\)start_background_sync()/\1# ‚ö° –í–ò–ú–ö–ù–ï–ù–û: start_background_sync()  # –í–∏–º–∫–Ω–µ–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó/' app.py

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
sudo systemctl restart propart

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏
systemctl status propart | head -10


# –í–ê–†–Ü–ê–ù–¢ 2: –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–¥ –∑ git (—è–∫—â–æ –∑–º—ñ–Ω–∏ –∑–∞–∫–æ–º—ñ—á–µ–Ω—ñ)
==========================================

git pull
sudo systemctl restart propart


# –í–ê–†–Ü–ê–ù–¢ 3: –ü–æ–≤–Ω–µ –≤–∏–º–∫–Ω–µ–Ω–Ω—è –≤—Å—ñ—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤ HubSpot
==========================================

# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:
cat > –ü–û–í–ù–ï_–í–ò–ú–ö–ù–ï–ù–ù–Ø_HUBSPOT.sh << 'EOF'
#!/bin/bash
cd /home/pro-part-agent/htdocs/agent.pro-part.online/propart-real-estate-hub
cp app.py app.py.backup.$(date +%Y%m%d_%H%M%S)
sed -i 's/^\([[:space:]]*\)start_background_sync()/\1# ‚ö° –í–ò–ú–ö–ù–ï–ù–û: start_background_sync()/' app.py
sudo systemctl restart propart
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
EOF

chmod +x –ü–û–í–ù–ï_–í–ò–ú–ö–ù–ï–ù–ù–Ø_HUBSPOT.sh
sudo ./–ü–û–í–ù–ï_–í–ò–ú–ö–ù–ï–ù–ù–Ø_HUBSPOT.sh


# –ü–ï–†–ï–í–Ü–†–ö–ê –ü–Ü–°–õ–Ø –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø
==========================================

# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≤–∏–º–∫–Ω–µ–Ω–∞:
grep "start_background_sync" app.py | grep -v "^[[:space:]]*#"

# –ú–∞—î –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—å–æ (–Ω–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤)

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å:
systemctl status propart | head -10

# 3. –¢–µ—Å—Ç —à–≤–∏–¥–∫–æ—Å—Ç—ñ:
for i in {1..3}; do
    START=$(date +%s%N)
    curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/ > /dev/null 2>&1
    END=$(date +%s%N)
    TIME=$((($END - $START) / 1000000))
    echo "–ó–∞–ø–∏—Ç $i: ${TIME}ms"
done


# –Ø–ö–©–û –î–û–°–Ü –ü–û–í–Ü–õ–¨–ù–û
==========================================

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
cat > –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê_–®–í–ò–î–ö–û–°–¢–Ü.sh << 'EOF'
#!/bin/bash
echo "üîç –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê –®–í–ò–î–ö–û–°–¢–Ü"
echo "=========================="
echo ""
echo "1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:"
grep "start_background_sync" app.py | grep -v "^[[:space:]]*#" && echo "‚ùå –ê–∫—Ç–∏–≤–Ω–∞" || echo "‚úÖ –í–∏–º–∫–Ω–µ–Ω–∞"
echo ""
echo "2. –¢–µ—Å—Ç —à–≤–∏–¥–∫–æ—Å—Ç—ñ (3 –∑–∞–ø–∏—Ç–∏):"
for i in {1..3}; do
    START=$(date +%s%N)
    CODE=$(curl -s -o /dev/null -w "%{http_code}" --connect-timeout 10 http://localhost:8000/ 2>/dev/null)
    END=$(date +%s%N)
    TIME=$((($END - $START) / 1000000))
    echo "–ó–∞–ø–∏—Ç $i: HTTP $CODE, —á–∞—Å: ${TIME}ms"
done
echo ""
echo "3. –ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:"
uptime
free -h | grep Mem
EOF

chmod +x –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê_–®–í–ò–î–ö–û–°–¢–Ü.sh
sudo ./–î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê_–®–í–ò–î–ö–û–°–¢–Ü.sh

==========================================

