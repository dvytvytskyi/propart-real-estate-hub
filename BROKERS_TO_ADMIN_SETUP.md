# üë• –ü–†–ò–í'–Ø–ó–ö–ê –ë–†–û–ö–ï–†–Ü–í –î–û –ê–î–ú–Ü–ù–Ü–í

## ‚úÖ –©–û –ó–†–û–ë–õ–ï–ù–û:

### 1Ô∏è‚É£ **–ú–æ–¥–µ–ª—å User**
- –î–æ–¥–∞–Ω–æ –ø–æ–ª–µ `admin_id` - ID –∞–¥–º—ñ–Ω–∞ –¥–ª—è –±—Ä–æ–∫–µ—Ä—ñ–≤
- –î–æ–¥–∞–Ω–æ relationship `brokers` - —Å–ø–∏—Å–æ–∫ –±—Ä–æ–∫–µ—Ä—ñ–≤ –∞–¥–º—ñ–Ω–∞
- –î–æ–¥–∞–Ω–æ relationship `admin` - –∞–¥–º—ñ–Ω –±—Ä–æ–∫–µ—Ä–∞

### 2Ô∏è‚É£ **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è**
- –ü—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó **–æ–±–æ–≤'—è–∑–∫–æ–≤–æ** –≤–∏–±–∏—Ä–∞—î—Ç—å—Å—è –∞–¥–º—ñ–Ω
- Dropdown –∑ —É—Å—ñ–º–∞ –∞–¥–º—ñ–Ω–∞–º–∏ —Å–∏—Å—Ç–µ–º–∏
- –ë–µ–∑ –≤–∏–±–æ—Ä—É –∞–¥–º—ñ–Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–µ–º–æ–∂–ª–∏–≤–∞

### 3Ô∏è‚É£ **–ü—Ä–æ—Ñ—ñ–ª—å –∞–¥–º—ñ–Ω–∞**
- –ë–ª–æ–∫ "–ú–æ—ó –±—Ä–æ–∫–µ—Ä–∏" –∑ –ø–µ—Ä–µ–ª—ñ–∫–æ–º —É—Å—ñ—Ö –±—Ä–æ–∫–µ—Ä—ñ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–∂–Ω–æ–º—É –±—Ä–æ–∫–µ—Ä—É:
  - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ª—ñ–¥—ñ–≤
  - –ö—ñ–ª—å–∫—ñ—Å—Ç—å —É–≥–æ–¥
  - –°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

### 4Ô∏è‚É£ **Dashboard –∞–¥–º—ñ–Ω–∞**
- –ê–¥–º—ñ–Ω –±–∞—á–∏—Ç—å **—Ç—ñ–ª—å–∫–∏** –ª—ñ–¥—ñ–≤ —Å–≤–æ—ó—Ö –±—Ä–æ–∫–µ—Ä—ñ–≤
- –ú–µ—Ç—Ä–∏–∫–∏ –≤—Ä–∞—Ö–æ–≤—É—é—Ç—å —Ç—ñ–ª—å–∫–∏ –ª—ñ–¥—ñ–≤ –π–æ–≥–æ –±—Ä–æ–∫–µ—Ä—ñ–≤
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

---

## üìã –Ü–ù–°–¢–†–£–ö–¶–Ü–á –î–õ–Ø –î–ï–ü–õ–û–Æ

### **–ö—Ä–æ–∫ 1: SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä**
```bash
ssh root@188.245.228.175
```

### **–ö—Ä–æ–∫ 2: –ü–µ—Ä–µ–π—Ç–∏ –¥–æ –ø—Ä–æ–µ–∫—Ç—É**
```bash
cd /home/pro-part-agent/htdocs/agent.pro-part.online/propart-real-estate-hub
```

### **–ö—Ä–æ–∫ 3: –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–¥**
```bash
git pull origin main
```

### **–ö—Ä–æ–∫ 4: –ú—ñ–≥—Ä–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**
```bash
# –î–æ–¥–∞—Ç–∏ –ø–æ–ª–µ admin_id –¥–æ —Ç–∞–±–ª–∏—Ü—ñ user
venv/bin/python3 migrate_add_admin_field.py
```

### **–ö—Ä–æ–∫ 5: –í–∏–¥–∞–ª–∏—Ç–∏ –ª—ñ–¥—ñ–≤ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)**
```bash
# –û–ü–¶–Ü–û–ù–ê–õ–¨–ù–û: –Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ –ø–æ—á–∞—Ç–∏ –∑ —á–∏—Å—Ç–æ—ó –±–∞–∑–∏
venv/bin/python3 delete_all_leads.py
```

### **–ö—Ä–æ–∫ 6: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫**
```bash
pkill -f "python.*run.py"
sleep 2
nohup venv/bin/python run.py > logs/propart.log 2>&1 &
sleep 4
```

### **–ö—Ä–æ–∫ 7: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞**
```bash
ps aux | grep "python.*run.py" | grep -v grep
netstat -tulpn | grep 8090
tail -20 logs/propart.log
```

---

## üéØ –Ø–ö –ü–†–ê–¶–Æ–Ñ

### **–î–ª—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:**
1. –ô–¥—É—Ç—å –Ω–∞ /register
2. –ó–∞–ø–æ–≤–Ω—é—é—Ç—å —Ñ–æ—Ä–º—É
3. **–í–∏–±–∏—Ä–∞—é—Ç—å –∞–¥–º—ñ–Ω–∞ –∑—ñ —Å–ø–∏—Å–∫—É** (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ!)
4. –†–µ—î—Å—Ç—Ä—É—é—Ç—å—Å—è

### **–î–ª—è –∞–¥–º—ñ–Ω—ñ–≤:**
1. –ó–∞—Ö–æ–¥—è—Ç—å —É –ø—Ä–æ—Ñ—ñ–ª—å
2. –ë–∞—á–∞—Ç—å –±–ª–æ–∫ "–ú–æ—ó –±—Ä–æ–∫–µ—Ä–∏"
3. –ë–∞—á–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–æ–∂–Ω–æ–≥–æ –±—Ä–æ–∫–µ—Ä–∞
4. –£ dashboard –±–∞—á–∞—Ç—å —Ç—ñ–ª—å–∫–∏ –ª—ñ–¥—ñ–≤ —Å–≤–æ—ó—Ö –±—Ä–æ–∫–µ—Ä—ñ–≤

### **–î–ª—è –±—Ä–æ–∫–µ—Ä—ñ–≤:**
- –ü—Ä–∞—Ü—é—é—Ç—å —è–∫ –∑–∞–∑–≤–∏—á–∞–π
- –ü—Ä–∏–≤'—è–∑–∞–Ω—ñ –¥–æ —Å–≤–æ–≥–æ –∞–¥–º—ñ–Ω–∞
- –á—Ö –ª—ñ–¥–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —É —ó—Ö–Ω—å–æ–≥–æ –∞–¥–º—ñ–Ω–∞

---

## üîß –ü–†–ò–ö–õ–ê–î –í–ò–ö–û–†–ò–°–¢–ê–ù–ù–Ø

### **–°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–¥–º—ñ–Ω–∞ (–Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ):**
```python
from app import app, db, User
from werkzeug.security import generate_password_hash

with app.app_context():
    admin = User(
        username='manager_john',
        email='john@pro-part.online',
        password_hash=generate_password_hash('securepassword'),
        role='admin',
        is_verified=True
    )
    db.session.add(admin)
    db.session.commit()
    print(f"‚úÖ –ê–¥–º—ñ–Ω —Å—Ç–≤–æ—Ä–µ–Ω–∏–π: ID {admin.id}")
```

### **–ü—Ä–∏–≤'—è–∑–∞—Ç–∏ —ñ—Å–Ω—É—é—á–æ–≥–æ –±—Ä–æ–∫–µ—Ä–∞ –¥–æ –∞–¥–º—ñ–Ω–∞:**
```python
from app import app, db, User

with app.app_context():
    broker = User.query.filter_by(username='broker_name').first()
    admin = User.query.filter_by(username='manager_john').first()
    
    if broker and admin:
        broker.admin_id = admin.id
        db.session.commit()
        print(f"‚úÖ –ë—Ä–æ–∫–µ—Ä {broker.username} –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–π –¥–æ {admin.username}")
```

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –ë–î

```
User:
‚îú‚îÄ‚îÄ id (primary key)
‚îú‚îÄ‚îÄ username
‚îú‚îÄ‚îÄ email
‚îú‚îÄ‚îÄ role ('admin' | 'agent')
‚îú‚îÄ‚îÄ admin_id (foreign key ‚Üí User.id)  ‚Üê –ù–û–í–ï –ü–û–õ–ï
‚îî‚îÄ‚îÄ relationships:
    ‚îú‚îÄ‚îÄ brokers (User[])    ‚Üê –°–ø–∏—Å–æ–∫ –±—Ä–æ–∫–µ—Ä—ñ–≤ –∞–¥–º—ñ–Ω–∞
    ‚îî‚îÄ‚îÄ admin (User)        ‚Üê –ê–¥–º—ñ–Ω –±—Ä–æ–∫–µ—Ä–∞

Lead:
‚îú‚îÄ‚îÄ id
‚îú‚îÄ‚îÄ agent_id (foreign key ‚Üí User.id)
‚îî‚îÄ‚îÄ ...
```

---

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û

1. **–ê–¥–º—ñ–Ω–∏ –Ω–µ –º–∞—é—Ç—å admin_id** - —Ü–µ –ø–æ–ª–µ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –±—Ä–æ–∫–µ—Ä—ñ–≤
2. **–ë—Ä–æ–∫–µ—Ä–∏ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ** –º–∞—é—Ç—å admin_id
3. **–°—Ç–∞—Ä—ñ –±—Ä–æ–∫–µ—Ä–∏** (–±–µ–∑ admin_id) - —Ç—Ä–µ–±–∞ –≤—Ä—É—á–Ω—É –ø—Ä–∏–≤'—è–∑–∞—Ç–∏
4. **–ê–¥–º—ñ–Ω–∏ –±–∞—á–∞—Ç—å —Ç—ñ–ª—å–∫–∏** –ª—ñ–¥—ñ–≤ —Å–≤–æ—ó—Ö –±—Ä–æ–∫–µ—Ä—ñ–≤

---

## üöÄ –ì–û–¢–û–í–û!

–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π:
- ‚úÖ –ë—Ä–æ–∫–µ—Ä–∏ –ø—Ä–∏–≤'—è–∑–∞–Ω—ñ –¥–æ –∞–¥–º—ñ–Ω—ñ–≤
- ‚úÖ –ê–¥–º—ñ–Ω–∏ –±–∞—á–∞—Ç—å —Å–≤–æ—ó—Ö –±—Ä–æ–∫–µ—Ä—ñ–≤ —É –ø—Ä–æ—Ñ—ñ–ª—ñ
- ‚úÖ Dashboard –∞–¥–º—ñ–Ω–∞ –ø–æ–∫–∞–∑—É—î —Ç—ñ–ª—å–∫–∏ –ª—ñ–¥—ñ–≤ –π–æ–≥–æ –±—Ä–æ–∫–µ—Ä—ñ–≤
- ‚úÖ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –≤–∏–º–∞–≥–∞—î –≤–∏–±–æ—Ä—É –∞–¥–º—ñ–Ω–∞

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:** https://agent.pro-part.online

