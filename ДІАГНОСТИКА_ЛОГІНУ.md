# üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ª–æ–≥—ñ–Ω–æ–º –∞–≥–µ–Ω—Ç—ñ–≤

## üìã –ü–æ–∫—Ä–æ–∫–æ–≤–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ö—Ä–æ–∫ 1: –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

–í–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:

```bash
cd /home/pro-part-agent/htdocs/agent.pro-part.online/propart-real-estate-hub
source venv/bin/activate
python3 diagnose_login_issue.py
deactivate
```

–¶–µ –ø–æ–∫–∞–∂–µ:
- –°–∫—ñ–ª—å–∫–∏ –∞–≥–µ–Ω—Ç—ñ–≤ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ
- –°–∫—ñ–ª—å–∫–∏ –∞–≥–µ–Ω—Ç—ñ–≤ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏—Ö
- –ß–∏ –ø—Ä–∞—Ü—é—é—Ç—å –ø–∞—Ä–æ–ª—ñ
- –î–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ–∂–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

---

### –ö—Ä–æ–∫ 2: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤ –ø—ñ—Å–ª—è —Å–ø—Ä–æ–±–∏ –ª–æ–≥—ñ–Ω—É

–°–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ –ø—ñ–¥ –∞–≥–µ–Ω—Ç–æ–º, –ø–æ—Ç—ñ–º –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏:

```bash
sudo journalctl -u propart -f --since "2 minutes ago" | grep -i "login\|auth\|error"
```

–®—É–∫–∞–π—Ç–µ:
- `üîç Login: –°–ø—Ä–æ–±–∞ –≤—Ö–æ–¥—É –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞` - –ª–æ–≥—ñ–Ω –ø–æ—á–∞–≤—Å—è
- `‚úÖ Login: –£—Å–ø—ñ—à–Ω–∏–π –≤—Ö—ñ–¥` - —É—Å–ø—ñ—à–Ω–æ
- `‚ö†Ô∏è Login: –ê–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π` - –∞–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π
- `‚ö†Ô∏è Login: –ê–∫–∞—É–Ω—Ç –¥–µ–∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∏–π` - –∞–∫–∞—É–Ω—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏–π
- `‚ö†Ô∏è Login: –ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å` - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å
- `‚ùå` - –±—É–¥—å-—è–∫—ñ –ø–æ–º–∏–ª–∫–∏

---

## üîß –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ê–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π

**–°–∏–º–ø—Ç–æ–º–∏:**
- –í –ª–æ–≥–∞—Ö: `‚ö†Ô∏è Login: –ê–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π`
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: "–í–∞—à –∞–∫–∞—É–Ω—Ç —Ç–∏–º—á–∞—Å–æ–≤–æ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π"

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
cd /home/pro-part-agent/htdocs/agent.pro-part.online/propart-real-estate-hub
source venv/bin/activate
python3 unlock_user.py <username>
deactivate
```

–ê–±–æ –≤—Ä—É—á–Ω—É:
```python
from app import app, db, User
with app.app_context():
    user = User.query.filter_by(username='<username>').first()
    user.unlock_account()
    db.session.commit()
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ê–∫–∞—É–Ω—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏–π

**–°–∏–º–ø—Ç–æ–º–∏:**
- –í –ª–æ–≥–∞—Ö: `‚ö†Ô∏è Login: –ê–∫–∞—É–Ω—Ç –¥–µ–∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∏–π`
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: "–í–∞—à –∞–∫–∞—É–Ω—Ç –¥–µ–∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∏–π"

**–†—ñ—à–µ–Ω–Ω—è:**
```python
from app import app, db, User
with app.app_context():
    user = User.query.filter_by(username='<username>').first()
    user.is_active = True
    db.session.commit()
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å

**–°–∏–º–ø—Ç–æ–º–∏:**
- –í –ª–æ–≥–∞—Ö: `‚ö†Ô∏è Login: –ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å`
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: "–ù–µ–≤—ñ—Ä–Ω–µ —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–±–æ –ø–∞—Ä–æ–ª—å"

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
cd /home/pro-part-agent/htdocs/agent.pro-part.online/propart-real-estate-hub
source venv/bin/activate
python3 fix_user_login.py <username> <–Ω–æ–≤–∏–π_–ø–∞—Ä–æ–ª—å>
deactivate
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ

**–°–∏–º–ø—Ç–æ–º–∏:**
- –í –ª–æ–≥–∞—Ö: `‚ö†Ô∏è Login: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ`
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: "–ù–µ–≤—ñ—Ä–Ω–µ —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–±–æ –ø–∞—Ä–æ–ª—å"

**–†—ñ—à–µ–Ω–Ω—è:**
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —ñ—Å–Ω—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á:
```python
from app import app, db, User
with app.app_context():
    users = User.query.filter_by(role='agent').all()
    for user in users:
        print(f"{user.username} - {user.email}")
```

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–Ω—É

–ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Å–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ –ø—ñ–¥ –∞–≥–µ–Ω—Ç–æ–º —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏:

```bash
sudo journalctl -u propart -f | grep -i "login"
```

---

## üí° –®–≤–∏–¥–∫–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —à–≤–∏–¥–∫–æ —Ä–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ –≤—Å—ñ—Ö –∞–≥–µ–Ω—Ç—ñ–≤:

```bash
cd /home/pro-part-agent/htdocs/agent.pro-part.online/propart-real-estate-hub
source venv/bin/activate
python3 << 'EOF'
from app import app, db, User
with app.app_context():
    agents = User.query.filter_by(role='agent').all()
    for agent in agents:
        agent.unlock_account()
        agent.is_active = True
        agent.reset_login_attempts()
    db.session.commit()
    print(f"‚úÖ –†–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–æ —Ç–∞ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ {len(agents)} –∞–≥–µ–Ω—Ç—ñ–≤")
EOF
deactivate
```

---

## üìä –ù–∞–¥—ñ—à–ª—ñ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω–∞–¥—ñ—à–ª—ñ—Ç—å:
1. –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ `diagnose_login_issue.py`
2. –õ–æ–≥–∏ –ø—ñ—Å–ª—è —Å–ø—Ä–æ–±–∏ –ª–æ–≥—ñ–Ω—É
3. –Ø–∫–µ —Å–∞–º–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±–∞—á–∏—Ç—å –∞–≥–µ–Ω—Ç –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –≤—Ö–æ–¥—É

–¶–µ –¥–æ–ø–æ–º–æ–∂–µ —Ç–æ—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É!

