==========================================
–®–í–ò–î–ö–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –ü–û–í–Ü–õ–¨–ù–û–ì–û –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø
==========================================

–í–∏–∫–æ–Ω–∞–π—Ç–µ —Ü—ñ –∫–æ–º–∞–Ω–¥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:

cd /home/pro-part-agent/htdocs/agent.pro-part.online/propart-real-estate-hub

# 1. –ó—É–ø–∏–Ω–∏—Ç–∏ —Å—Ç–∞—Ä—ñ –ø—Ä–æ—Ü–µ—Å–∏
sudo pkill -9 gunicorn 2>/dev/null
sleep 2

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏
sudo systemctl restart postgresql
sudo systemctl restart propart
sudo systemctl restart nginx

# 3. –ü–æ—á–µ–∫–∞—Ç–∏ 5 —Å–µ–∫—É–Ω–¥
sleep 5

# 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
echo "–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—ñ–≤:"
systemctl is-active postgresql propart nginx

# 5. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ workers
echo ""
echo "–ö—ñ–ª—å–∫—ñ—Å—Ç—å workers:"
ps aux | grep -E "[g]unicorn.*worker" | wc -l

# 6. –¢–µ—Å—Ç —à–≤–∏–¥–∫–æ—Å—Ç—ñ
echo ""
echo "–¢–µ—Å—Ç —à–≤–∏–¥–∫–æ—Å—Ç—ñ (3 –∑–∞–ø–∏—Ç–∏):"
for i in {1..3}; do
    START=$(date +%s%N)
    CODE=$(curl -s -o /dev/null -w "%{http_code}" --connect-timeout 10 http://localhost:8000/ 2>/dev/null)
    END=$(date +%s%N)
    TIME=$((($END - $START) / 1000000))
    echo "–ó–∞–ø–∏—Ç $i: HTTP $CODE, —á–∞—Å: ${TIME}ms"
done

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"

==========================================

–ê–ë–û –°–¢–í–û–†–ò–¢–ò –°–ö–†–ò–ü–¢ –ù–ê –°–ï–†–í–ï–†–Ü:
==========================================

cat > QUICK_FIX_SLOW.sh << 'EOF'
#!/bin/bash
cd /home/pro-part-agent/htdocs/agent.pro-part.online/propart-real-estate-hub
echo "‚ö° –®–í–ò–î–ö–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –ü–û–í–Ü–õ–¨–ù–û–ì–û –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø"
echo "=========================================="
echo ""
echo "üõë –ó—É–ø–∏–Ω—è—é —Å—Ç–∞—Ä—ñ –ø—Ä–æ—Ü–µ—Å–∏..."
sudo pkill -9 gunicorn 2>/dev/null
sleep 2
echo "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é —Å–µ—Ä–≤—ñ—Å–∏..."
sudo systemctl restart postgresql propart nginx
sleep 5
echo ""
echo "üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—ñ–≤:"
systemctl is-active postgresql propart nginx
echo ""
echo "‚öôÔ∏è Workers:"
ps aux | grep -E "[g]unicorn.*worker" | wc -l
echo ""
echo "üåê –¢–µ—Å—Ç —à–≤–∏–¥–∫–æ—Å—Ç—ñ:"
for i in {1..3}; do
    START=$(date +%s%N)
    CODE=$(curl -s -o /dev/null -w "%{http_code}" --connect-timeout 10 http://localhost:8000/ 2>/dev/null)
    END=$(date +%s%N)
    TIME=$((($END - $START) / 1000000))
    echo "–ó–∞–ø–∏—Ç $i: HTTP $CODE, —á–∞—Å: ${TIME}ms"
done
echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
EOF

chmod +x QUICK_FIX_SLOW.sh
sudo ./QUICK_FIX_SLOW.sh

