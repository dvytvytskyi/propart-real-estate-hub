# üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó HubSpot deals –ª–æ–∫–∞–ª—å–Ω–æ

## üìã –ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç—É –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
source venv/bin/activate

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç—É
python run.py
```

–ü—Ä–æ–µ–∫—Ç –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: **http://localhost:5001**

---

## üîë –ö—Ä–æ–∫ 2: –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://localhost:5001
2. –£–≤—ñ–π–¥—ñ—Ç—å —è–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä:
   - **Username:** `admin`
   - **Password:** `admin123`

---

## üîÑ –ö—Ä–æ–∫ 3: –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó deals

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

1. –ü—ñ—Å–ª—è –≤—Ö–æ–¥—É –ø–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ **Dashboard** (`/dashboard`)
2. –ó–Ω–∞–π–¥—ñ—Ç—å –∫–Ω–æ–ø–∫—É **"–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ deals"** (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤)
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É - —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø–æ—á–Ω–µ—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
4. –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑'—è–≤–∏—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏:
   - –°–∫—ñ–ª—å–∫–∏ –ª—ñ–¥–∏ –±—É–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ
   - –°–∫—ñ–ª—å–∫–∏ –ª—ñ–¥–∏ –±—É–ª–æ –æ–Ω–æ–≤–ª–µ–Ω–æ
   - –°–∫—ñ–ª—å–∫–∏ –ø–æ–º–∏–ª–æ–∫ –≤–∏–Ω–∏–∫–ª–æ

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Python –∫–æ–Ω—Å–æ–ª—å (–¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ñ—à–æ–≥–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è)

```bash
# –í—ñ–¥–∫—Ä–∏–π—Ç–µ –Ω–æ–≤–∏–π —Ç–µ—Ä–º—ñ–Ω–∞–ª —ñ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –ø—Ä–æ–µ–∫—Ç—É
cd /Users/vytvytskyi/propart-real-estate-hub
source venv/bin/activate

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å Python –∫–æ–Ω—Å–æ–ª—å
python

# –í –∫–æ–Ω—Å–æ–ª—ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:
from app import app, db, fetch_all_deals_from_hubspot
with app.app_context():
    result = fetch_all_deals_from_hubspot()
    print(f"‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:")
    print(f"   –°—Ç–≤–æ—Ä–µ–Ω–æ: {result['created']}")
    print(f"   –û–Ω–æ–≤–ª–µ–Ω–æ: {result['updated']}")
    print(f"   –ü–æ–º–∏–ª–æ–∫: {result['errors']}")
    print(f"   –í—Å—å–æ–≥–æ –æ–±—Ä–æ–±–ª–µ–Ω–æ: {result['total_processed']}")
```

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ curl (–¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

```bash
# –°–ø–æ—á–∞—Ç–∫—É —É–≤—ñ–π–¥—ñ—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–µ—Å—ñ—é
# –ü–æ—Ç—ñ–º –≤–∏–∫–æ–Ω–∞–π—Ç–µ (–∑–∞–º—ñ–Ω—ñ—Ç—å SESSION_COOKIE –Ω–∞ –≤–∞—à—É —Å–µ—Å—ñ—é):

curl -X POST http://localhost:5001/fetch_all_deals \
  -H "Content-Type: application/json" \
  -H "Cookie: session=SESSION_COOKIE"
```

---

## üìä –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è

–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î deals –∑ —Ç–∞–∫–∏—Ö pipelines —Ç–∞ stages:

### Pipeline: `default`
- Stages: `appointmentscheduled`, `3204738245`, `3204738246`, `3523602653`, `3523660994`

### Pipeline: `2341107958`
- Stages: `3204738258`, `3204738259`, `3204738261`, `3204738262`, `3204738265`, `3204738266`, `3204738267`

### Pipeline: `2346002665`
- Stages: `3206386874`, `3206386875`, `3206386876`, `3206386877`, `3206386878`, `3206386879`, `3206344915`

**–í–∞–∂–ª–∏–≤–æ:** –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î:
- `phone_number` –∑ **deal properties** (–Ω–µ –∑ –∫–æ–Ω—Ç–∞–∫—Ç—É!)
- `hs_object_id` —è–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä deal

---

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

### –ß–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ Dashboard (`/dashboard`)
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å–ø–∏—Å–æ–∫ –ª—ñ–¥–∏ - –º–∞—é—Ç—å –∑'—è–≤–∏—Ç–∏—Å—è –Ω–æ–≤—ñ –∞–±–æ –æ–Ω–æ–≤–ª–µ–Ω—ñ –∑–∞–ø–∏—Å–∏
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ñ –Ω–æ–º–µ—Ä–∏ - –≤–æ–Ω–∏ –º–∞—é—Ç—å –±—É—Ç–∏ –∑ deal properties

### –ß–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–∏—Ö:
```bash
# SQLite (–ª–æ–∫–∞–ª—å–Ω–æ)
sqlite3 instance/real_estate_hub.db

# –í –∫–æ–Ω—Å–æ–ª—ñ SQLite:
SELECT id, deal_name, phone, hubspot_deal_id, hubspot_contact_id 
FROM lead 
ORDER BY id DESC 
LIMIT 10;
```

---

## ‚ö†Ô∏è –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

### 1. –ü–æ–º–∏–ª–∫–∞ "HubSpot API –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π"
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–∞–π–ª `.env` - –º–∞—î –±—É—Ç–∏ `HUBSPOT_API_KEY=–≤–∞—à_–∫–ª—é—á`

### 2. –ü–æ–º–∏–ª–∫–∞ "–¢—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏"
**–†—ñ—à–µ–Ω–Ω—è:** –£–≤—ñ–π–¥—ñ—Ç—å —è–∫ `admin` (–Ω–µ —è–∫ `agent`)

### 3. –ü–æ–º–∏–ª–∫–∞ 401 (Unauthorized)
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π `HUBSPOT_API_KEY` –≤ `.env`

### 4. –ù–µ–º–∞—î deals –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ
**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**
- Deals –Ω–µ–º–∞—î –≤ –≤–∫–∞–∑–∞–Ω–∏—Ö pipelines/stages
- Deals –Ω–µ –º–∞—é—Ç—å –ø–æ–ª—è `phone_number`
- –ü—Ä–æ–±–ª–µ–º–∏ –∑ API –∫–ª—é—á–µ–º

---

## üìù –õ–æ–≥—É–≤–∞–Ω–Ω—è

–£—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é –≤–∏–≤–æ–¥—è—Ç—å—Å—è –≤:
- **–ö–æ–Ω—Å–æ–ª—å** (—è–∫—â–æ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ —á–µ—Ä–µ–∑ `python run.py`)
- **–õ–æ–≥–∏** (—è–∫—â–æ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ —á–µ—Ä–µ–∑ Gunicorn)

–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É:
```
üîÑ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è deals –∑ pipeline default (stages: 5)...
üìÑ Pipeline default, stage appointmentscheduled, —Å—Ç–æ—Ä—ñ–Ω–∫–∞ 1: –æ—Ç—Ä–∏–º–∞–Ω–æ 10 deals
‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤–∏–π –ª—ñ–¥ –∑ HubSpot deal 123456 (phone: +380501234567)
‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ –ª—ñ–¥ 42 –∑ HubSpot deal 123457
üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å pipeline default, stage appointmentscheduled: —Å—Ç–æ—Ä—ñ–Ω–∫–∞ 10
‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ: —Å—Ç–≤–æ—Ä–µ–Ω–æ 5, –æ–Ω–æ–≤–ª–µ–Ω–æ 3, –ø–æ–º–∏–ª–æ–∫ 0
```

---

## üöÄ –ü—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–Ø–∫—â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ:
1. –ó–∞–∫–æ–º—ñ—Ç—å—Ç–µ –∑–º—ñ–Ω–∏ (—è–∫—â–æ —â–µ –Ω–µ –∑—Ä–æ–±–∏–ª–∏)
2. –ó–∞–ø—É—à—Ç–µ –Ω–∞ GitHub
3. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

---

## üí° –ü–æ—Ä–∞–¥–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

1. **–ü–æ—á–Ω—ñ—Ç—å –∑ –º–∞–ª–æ–≥–æ:** –°–ø–æ—á–∞—Ç–∫—É –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞ –Ω–µ–≤–µ–ª–∏–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ deals
2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏:** –î–∏–≤—ñ—Ç—å—Å—è –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ë–î:** –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ñ –Ω–æ–º–µ—Ä–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. **–¢–µ—Å—Ç—É–π—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤:** –°–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–¥–∞—Ç–∏ –ª—ñ–¥ –∑ –Ω–æ–º–µ—Ä–æ–º, —è–∫–∏–π –≤–∂–µ —î –≤ –ë–î

