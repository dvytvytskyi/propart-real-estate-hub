#!/bin/bash

# ============================================================
# üîå –°–ü–†–û–ë–ê –ü–Ü–î–ö–õ–Æ–ß–ï–ù–ù–Ø –î–û –°–ï–†–í–ï–†–ê
# ============================================================

SERVER_IP="188.245.228.175"

echo "üîå –°–ø—Ä–æ–±—É—î–º–æ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ $SERVER_IP"
echo ""

# –í–∞—Ä—ñ–∞–Ω—Ç 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π SSH
echo "1Ô∏è‚É£ –°–ø—Ä–æ–±—É—î–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π SSH (root@$SERVER_IP)..."
if ssh -o ConnectTimeout=5 -o BatchMode=yes root@$SERVER_IP "echo '–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–µ!'" 2>/dev/null; then
    echo "   ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î!"
    echo "   üí° –í–∏–∫–æ–Ω–∞–π—Ç–µ: ssh root@$SERVER_IP"
    exit 0
else
    echo "   ‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è"
fi
echo ""

# –í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é hetzner-propart
echo "2Ô∏è‚É£ –°–ø—Ä–æ–±—É—î–º–æ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é hetzner-propart..."
if ssh -o ConnectTimeout=5 -o BatchMode=yes hetzner-propart "echo '–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–µ!'" 2>/dev/null; then
    echo "   ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î!"
    echo "   üí° –í–∏–∫–æ–Ω–∞–π—Ç–µ: ssh hetzner-propart"
    exit 0
else
    echo "   ‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è"
fi
echo ""

# –í–∞—Ä—ñ–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ pro-part-agent
echo "3Ô∏è‚É£ –°–ø—Ä–æ–±—É—î–º–æ —á–µ—Ä–µ–∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ pro-part-agent..."
if ssh -o ConnectTimeout=5 -o BatchMode=yes pro-part-agent@$SERVER_IP "echo '–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–µ!'" 2>/dev/null; then
    echo "   ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î!"
    echo "   üí° –í–∏–∫–æ–Ω–∞–π—Ç–µ: ssh pro-part-agent@$SERVER_IP"
    exit 0
else
    echo "   ‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è"
fi
echo ""

# –í–∞—Ä—ñ–∞–Ω—Ç 4: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –ø–æ—Ä—Ç–∏
echo "4Ô∏è‚É£ –°–ø—Ä–æ–±—É—î–º–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –ø–æ—Ä—Ç–∏..."
PORTS=(2222 22022 22222 2200 22000)

for port in "${PORTS[@]}"; do
    echo "   –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ä—Ç—É $port..."
    if ssh -p $port -o ConnectTimeout=5 -o BatchMode=yes root@$SERVER_IP "echo '–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–µ!'" 2>/dev/null; then
        echo "   ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î –Ω–∞ –ø–æ—Ä—Ç—É $port!"
        echo "   üí° –í–∏–∫–æ–Ω–∞–π—Ç–µ: ssh -p $port root@$SERVER_IP"
        exit 0
    fi
done
echo "   ‚ùå –ñ–æ–¥–µ–Ω –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –ø–æ—Ä—Ç –Ω–µ –ø—Ä–∞—Ü—é—î"
echo ""

# –Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–ª–æ
echo "============================================================"
echo "‚ùå SSH –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–µ"
echo "============================================================"
echo ""
echo "üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–Ø: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ CloudPanel"
echo ""
echo "1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:"
echo "   https://$SERVER_IP:8443"
echo "   –∞–±–æ"
echo "   https://hosting.harbourtech.co/"
echo ""
echo "2. –£–≤—ñ–π–¥—ñ—Ç—å –≤ CloudPanel"
echo ""
echo "3. –ó–Ω–∞–π–¥—ñ—Ç—å —Å–∞–π—Ç 'agent.pro-part.online'"
echo ""
echo "4. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –≤–±—É–¥–æ–≤–∞–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω–∞–ª –∞–±–æ File Manager"
echo ""
echo "üìã –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è: SSH_FIX_INSTRUCTION.md"
echo ""

