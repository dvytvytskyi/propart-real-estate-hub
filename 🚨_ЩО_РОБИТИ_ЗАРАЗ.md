# üö® –©–û –†–û–ë–ò–¢–ò –ó–ê–†–ê–ó - –ü–æ–º–∏–ª–∫–∞ 502

## ‚ö° –®–í–ò–î–ö–ï –†–Ü–®–ï–ù–ù–Ø (1 —Ö–≤–∏–ª–∏–Ω–∞)

### 1Ô∏è‚É£ –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ SSH

```bash
ssh root@agent.pro-part.online
# –∞–±–æ
ssh –≤–∞—à-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á@agent.pro-part.online
```

---

### 2Ô∏è‚É£ –í–∏–∫–æ–Ω–∞–π—Ç–µ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É (—Å–∫–æ–ø—ñ—é–π—Ç–µ –ü–û–í–ù–Ü–°–¢–Æ):

```bash
cd /var/www/propart && git pull && chmod +x RESTART_ALL_SERVICES.sh && sudo ./RESTART_ALL_SERVICES.sh
```

---

### 3Ô∏è‚É£ –ü–æ—á–µ–∫–∞–π—Ç–µ 10 —Å–µ–∫—É–Ω–¥

–°–∫—Ä–∏–ø—Ç:
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Gunicorn (ProPart)
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Nginx
- ‚úÖ –ü–æ–∫–∞–∂–µ —Å—Ç–∞—Ç—É—Å –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤

---

### 4Ô∏è‚É£ –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä

–ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞:
```
https://agent.pro-part.online/admin/users
```

**–ú–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏!** ‚úÖ

---

## ‚ùì –©–û –Ø–ö–©–û –ù–ï –î–û–ü–û–ú–û–ì–õ–û?

### –°–ø–æ—Å—ñ–± 1: –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –ª–æ–≥–∏ –ø–æ–º–∏–ª–æ–∫

```bash
sudo tail -50 /var/log/propart/gunicorn_error.log
```

–ù–∞–¥—ñ—à–ª—ñ—Ç—å –º–µ–Ω—ñ –æ—Å—Ç–∞–Ω–Ω—ñ —Ä—è–¥–∫–∏ –ª–æ–≥—ñ–≤.

---

### –°–ø–æ—Å—ñ–± 2: –ü–æ–≤–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
cd /var/www/propart
sudo ./FIX_502_ERROR.sh
```

–¶–µ –ø–æ–∫–∞–∂–µ –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏.

---

### –°–ø–æ—Å—ñ–± 3: –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞

```bash
echo "PostgreSQL: $(sudo systemctl is-active postgresql)"
echo "ProPart: $(sudo systemctl is-active propart)"
echo "Nginx: $(sudo systemctl is-active nginx)"
echo "HTTP: $(curl -s -o /dev/null -w '%{http_code}' http://localhost:8000/)"
```

–ù–∞–¥—ñ—à–ª—ñ—Ç—å –º–µ–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ü–∏—Ö –∫–æ–º–∞–Ω–¥.

---

## üìå –¢–ò–ü–û–í–Ü –ü–†–ò–ß–ò–ù–ò 502

| –ü—Ä–∏—á–∏–Ω–∞ | –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ | –Ø–∫ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ |
|---------|---------------|--------------|
| Gunicorn –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π | `sudo systemctl status propart` | `sudo systemctl restart propart` |
| PostgreSQL –Ω–µ –ø—Ä–∞—Ü—é—î | `sudo systemctl status postgresql` | `sudo systemctl restart postgresql` |
| –ü–æ–º–∏–ª–∫–∞ –≤ –∫–æ–¥—ñ | `sudo journalctl -u propart -n 20` | –í–∏–ø—Ä–∞–≤–∏—Ç–∏ –∫–æ–¥ —Ç–∞ `git pull` |
| –ü–æ—Ä—Ç –∑–∞–π–Ω—è—Ç–∏–π | `sudo netstat -tlnp \| grep :8000` | `sudo pkill -9 gunicorn` |
| –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ RAM | `free -h` | –ó–º–µ–Ω—à–∏—Ç–∏ workers –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó |

---

## üéØ –ß–ï–ö–õ–ò–°–¢

- [ ] –ü—ñ–¥–∫–ª—é—á–∏–≤—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ SSH
- [ ] –í–∏–∫–æ–Ω–∞–≤ –∫–æ–º–∞–Ω–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É
- [ ] –ü–æ—á–µ–∫–∞–≤ 10 —Å–µ–∫—É–Ω–¥
- [ ] –í—ñ–¥–∫—Ä–∏–≤ —Å–∞–π—Ç —É –±—Ä–∞—É–∑–µ—Ä—ñ
- [ ] –°–∞–π—Ç –ø—Ä–∞—Ü—é—î ‚úÖ

**–Ø–∫—â–æ —Å–∞–π—Ç –Ω–µ –ø—Ä–∞—Ü—é—î** - –≤–∏–∫–æ–Ω–∞–π –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É —Ç–∞ –Ω–∞–¥—ñ—à–ª–∏ –º–µ–Ω—ñ –ª–æ–≥–∏.

---

## üìû –©–û –ù–ê–î–Ü–°–õ–ê–¢–ò –ú–ù–Ü

–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤–∏—Ä—ñ—à–∏–ª–∞—Å—å, –≤–∏–∫–æ–Ω–∞–π —ñ –Ω–∞–¥—ñ—à–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```bash
cd /var/www/propart
sudo ./FIX_502_ERROR.sh > diagnostic.txt 2>&1
cat diagnostic.txt
```

–ê–±–æ –ø—Ä–æ—Å—Ç–æ:

```bash
sudo journalctl -u propart -n 30 --no-pager
```

---

## ‚ú® –ü–Ü–°–õ–Ø –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

–í—Å–µ –º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏:
- ‚úÖ `https://agent.pro-part.online` - –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è
- ‚úÖ `https://agent.pro-part.online/admin/users` - –ø—Ä–∞—Ü—é—î
- ‚úÖ –ù–µ–º–∞—î –ø–æ–º–∏–ª–∫–∏ 502

**–ì–æ—Ç–æ–≤–æ! üöÄ**

